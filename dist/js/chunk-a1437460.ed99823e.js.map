{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/esm/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/esm/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/esm/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/esm/toConsumableArray.js","webpack:///./src/views/Order.vue","webpack:///./src/views/Order.vue?3d30","webpack:///./src/views/Order.vue?f9be"],"names":["_arrayWithoutHoles","arr","Array","isArray","arrayLikeToArray","_iterableToArray","iter","Symbol","iterator","from","_nonIterableSpread","TypeError","_toConsumableArray","arrayWithoutHoles","iterableToArray","unsupportedIterableToArray","nonIterableSpread","class","for","active","isLoading","z-index","loader","color","ref","sendOrder","errors","id","name","type","placeholder","rules","form","user","email","tel","address","rows","message","$router","go","disabled","isComplete","carts","item","key","product","title","qty","unit","total","final_total","data","validate","computed","allInput","document","querySelectorAll","filter","classList","contains","console","log","length","this","methods","getCarts","$http","get","then","res","success","emitter","emit","catch","err","post","orderId","push","created","render"],"mappings":"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","file":"js/chunk-a1437460.ed99823e.js","sourcesContent":["import arrayLikeToArray from \"./arrayLikeToArray.js\";\nexport default function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}","export default function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter);\n}","export default function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}","import arrayWithoutHoles from \"./arrayWithoutHoles.js\";\nimport iterableToArray from \"./iterableToArray.js\";\nimport unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nimport nonIterableSpread from \"./nonIterableSpread.js\";\nexport default function _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}","<template>\n<Loading :active=\"isLoading\" :z-index=\"1060\" loader=\"bars\" color=\"#84543B\"></Loading>\n<div class=\"banner d-flex align-items-center justify-content-center\">\n    <h2\n      class=\"\n        text-white\n        fw-bold\n        bg-primary\n        border-bottom border-3\n        d-inline-block\n        py-3\n        px-5\n      \"\n    >\n      填寫資料\n    </h2>\n  </div>\n<section class=\"py-5\">\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-lg-8\">\n        <Form ref=\"orderForm\" v-slot=\"{ errors }\" @submit=\"sendOrder\">\n          <div class=\"mb-3\">\n            <label for=\"name\" class=\"form-label\">姓名 <span class=\"text-danger\">*</span></label>\n            <Field id=\"name\" name=\"姓名\" type=\"text\" class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['姓名'] }\" placeholder=\"請輸入姓名\"\n            rules=\"required\" v-model=\"form.user.name\"></Field>\n            <error-message name=\"姓名\" class=\"invalid-feedback\"></error-message>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">信箱 <span class=\"text-danger\">*</span></label>\n            <Field id=\"email\" name=\"信箱\" type=\"email\" class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['信箱'] }\" placeholder=\"請輸入信箱\"\n            rules=\"email|required\" v-model=\"form.user.email\"></Field>\n            <error-message name=\"信箱\" class=\"invalid-feedback\"></error-message>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"tel\" class=\"form-label\">電話 <span class=\"text-danger\">*</span></label>\n            <Field id=\"tel\" name=\"電話\" type=\"tel\" class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['電話'] }\" placeholder=\"請輸入電話\"\n            rules=\"required\" v-model=\"form.user.tel\"></Field>\n            <error-message name=\"電話\" class=\"invalid-feedback\"></error-message>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"address\" class=\"form-label\">地址 <span class=\"text-danger\">*</span></label>\n            <Field id=\"address\" name=\"地址\" type=\"text\" class=\"form-control\"\n            :class=\"{ 'is-invalid': errors['地址'] }\" placeholder=\"請輸入地址\"\n            rules=\"required\" v-model=\"form.user.address\"></Field>\n            <error-message name=\"地址\" class=\"invalid-feedback\"></error-message>\n          </div>\n\n          <div class=\"mb-3\">\n            <label for=\"message\" class=\"form-label\">留言</label>\n            <textarea id=\"message\" name=\"地址\" type=\"text\" class=\"form-control\"\n            placeholder=\"留言給我們\" rows=\"3\"\n            v-model=\"form.message\"></textarea>\n          </div>\n          <div class=\"d-flex justify-content-between my-3\">\n            <div class=\"btn btn-outline-primary\" @click=\"$router.go(-1)\">↼ 上一步</div>\n            <button class=\"btn btn-primary not-allowed\" type=\"submit\"\n              :disabled=\"!isComplete\">送出訂單</button>\n          </div>\n        </Form>\n      </div>\n      <div class=\"col-lg-4\">\n        <div class=\"text-center p-3 text-white bg-secondary\">\n          <h4 class=\"fw-bold\">訂單列表</h4>\n        </div>\n        <div class=\"row g-0 justify-content-between py-3 bg-primary text-white text-nowrap\"\n        v-for=\"item in carts.carts\" :key=\"item.id\">\n          <div class=\"col\">\n            <div class=\"ps-3\">{{ item.product.title }}</div>\n          </div>\n          <div class=\"col\"><div class=\"text-end\">\n            x {{ item.qty }} {{ item.product.unit }}\n          </div></div>\n          <div class=\"col\"><div class=\"text-end pe-3\">NT$ {{ item.total }}</div></div>\n        </div>\n        <div class=\"text-end p-3 bg-secondary text-dark\">\n          <h4 class=\"fw-bold\">總價：NT$ {{ carts.final_total }}</h4>\n        </div>\n      </div>\n    </div>\n  </div>\n  </section>\n</template>\n\n<script>\nimport emitter from '../assets/javascript/emitter';\n\nexport default {\n  data() {\n    return {\n      isLoading: false,\n      carts: {\n        carts: [],\n      },\n      form: {\n        user: {\n          name: '',\n          email: '',\n          tel: '',\n          address: '',\n        },\n        message: '',\n      },\n      validate: null,\n    };\n  },\n  computed: {\n    isComplete() {\n      const allInput = [...document.querySelectorAll('form input')];\n      const validate = allInput.filter((item) => item.classList.contains('is-invalid'));\n      console.log(validate.length);\n      return this.form.user.name && this.form.user.email\n      && this.form.user.tel && this.form.user.address && validate.length === 0;\n    },\n  },\n  methods: {\n    getCarts() {\n      this.isLoading = true;\n      this.$http\n        .get(`${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/cart`)\n        .then((res) => {\n          if (res.data.success) {\n            this.isLoading = false;\n            this.carts = res.data.data;\n          } else {\n            this.isLoading = false;\n            emitter.emit('push-message', res.data);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n    sendOrder() {\n      this.$http\n        .post(`${process.env.VUE_APP_URL}/api/${process.env.VUE_APP_PATH}/order`, { data: this.form })\n        .then((res) => {\n          if (res.data.success) {\n            console.log(res.data);\n            if (res.data.orderId) {\n              emitter.emit('push-message', res.data);\n              emitter.emit('update-cart');\n              this.$router.push(`/pay/${res.data.orderId}`);\n            }\n          } else {\n            emitter.emit('push-message', res.data);\n          }\n        })\n        .catch((err) => {\n          console.log(err);\n        });\n    },\n  },\n  created() {\n    this.getCarts();\n  },\n};\n</script>\n\n<style lang=\"scss\">\n  .not-allowed {\n    cursor: not-allowed;\n  }\n</style>\n","import { render } from \"./Order.vue?vue&type=template&id=312e6877\"\nimport script from \"./Order.vue?vue&type=script&lang=js\"\nexport * from \"./Order.vue?vue&type=script&lang=js\"\n\nimport \"./Order.vue?vue&type=style&index=0&id=312e6877&lang=scss\"\nscript.render = render\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./Order.vue?vue&type=style&index=0&id=312e6877&lang=scss\""],"sourceRoot":""}