(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a1437460"],{2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a("6b75");function r(e){if(Array.isArray(e))return Object(c["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var s=a("06c5");function n(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return r(e)||o(e)||Object(s["a"])(e)||n()}},4746:function(e,t,a){},cf2a:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),r=Object(c["createVNode"])("div",{class:"banner d-flex align-items-center justify-content-center"},[Object(c["createVNode"])("h2",{class:"\n        text-white\n        fw-bold\n        bg-primary\n        border-bottom border-3\n        d-inline-block\n        py-3\n        px-5\n      "}," 填寫資料 ")],-1),o={class:"py-5"},s={class:"container"},n={class:"row"},l={class:"col-lg-8"},d={class:"mb-3"},i=Object(c["createVNode"])("label",{for:"name",class:"form-label"},[Object(c["createTextVNode"])("姓名 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),b={class:"mb-3"},u=Object(c["createVNode"])("label",{for:"email",class:"form-label"},[Object(c["createTextVNode"])("信箱 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),m={class:"mb-3"},f=Object(c["createVNode"])("label",{for:"tel",class:"form-label"},[Object(c["createTextVNode"])("電話 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),p={class:"mb-3"},j=Object(c["createVNode"])("label",{for:"address",class:"form-label"},[Object(c["createTextVNode"])("地址 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),O={class:"mb-3"},V=Object(c["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),v={class:"d-flex justify-content-between my-3"},N={class:"col-lg-4"},h=Object(c["createVNode"])("div",{class:"text-center p-3 text-white bg-secondary"},[Object(c["createVNode"])("h4",{class:"fw-bold"},"訂單列表")],-1),g={class:"col"},y={class:"ps-3"},x={class:"col"},w={class:"text-end"},k={class:"col"},S={class:"text-end pe-3"},C={class:"text-end p-3 bg-secondary text-dark"},L={class:"fw-bold"};function T(e,t,a,T,B,q){var D=Object(c["resolveComponent"])("Loading"),$=Object(c["resolveComponent"])("Field"),F=Object(c["resolveComponent"])("error-message"),U=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(D,{active:B.isLoading,"z-index":1060,loader:"bars",color:"#84543B"},null,8,["active"]),r,Object(c["createVNode"])("section",o,[Object(c["createVNode"])("div",s,[Object(c["createVNode"])("div",n,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])(U,{ref:"orderForm",onSubmit:q.sendOrder},{default:Object(c["withCtx"])((function(a){var r=a.errors;return[Object(c["createVNode"])("div",d,[i,Object(c["createVNode"])($,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":r["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:B.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return B.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(F,{name:"姓名",class:"invalid-feedback"})]),Object(c["createVNode"])("div",b,[u,Object(c["createVNode"])($,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":r["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:B.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return B.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(F,{name:"信箱",class:"invalid-feedback"})]),Object(c["createVNode"])("div",m,[f,Object(c["createVNode"])($,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":r["電話"]}],placeholder:"請輸入電話",rules:"required",modelValue:B.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return B.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(F,{name:"電話",class:"invalid-feedback"})]),Object(c["createVNode"])("div",p,[j,Object(c["createVNode"])($,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":r["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:B.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return B.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(F,{name:"地址",class:"invalid-feedback"})]),Object(c["createVNode"])("div",O,[V,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{id:"message",name:"地址",type:"text",class:"form-control",placeholder:"留言給我們",rows:"3","onUpdate:modelValue":t[5]||(t[5]=function(e){return B.form.message=e})},null,512),[[c["vModelText"],B.form.message]])]),Object(c["createVNode"])("div",v,[Object(c["createVNode"])("div",{class:"btn btn-outline-primary",onClick:t[6]||(t[6]=function(t){return e.$router.go(-1)})},"↼ 上一步"),Object(c["createVNode"])("button",{class:"btn btn-primary not-allowed",type:"submit",disabled:!q.isComplete},"送出訂單",8,["disabled"])])]})),_:1},8,["onSubmit"])]),Object(c["createVNode"])("div",N,[h,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(B.carts.carts,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"row g-0 justify-content-between py-3 bg-primary text-white text-nowrap",key:e.id},[Object(c["createVNode"])("div",g,[Object(c["createVNode"])("div",y,Object(c["toDisplayString"])(e.product.title),1)]),Object(c["createVNode"])("div",x,[Object(c["createVNode"])("div",w," x "+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1)]),Object(c["createVNode"])("div",k,[Object(c["createVNode"])("div",S,"NT$ "+Object(c["toDisplayString"])(e.total),1)])])})),128)),Object(c["createVNode"])("div",C,[Object(c["createVNode"])("h4",L,"總價：NT$ "+Object(c["toDisplayString"])(B.carts.final_total),1)])])])])])],64)}var B=a("2909"),q=(a("4de4"),a("99af"),a("e4f3")),D={data:function(){return{isLoading:!1,carts:{carts:[]},form:{user:{name:"",email:"",tel:"",address:""},message:""},validate:null}},computed:{isComplete:function(){var e=Object(B["a"])(document.querySelectorAll("form input")),t=e.filter((function(e){return e.classList.contains("is-invalid")}));return console.log(t.length),this.form.user.name&&this.form.user.email&&this.form.user.tel&&this.form.user.address&&0===t.length}},methods:{getCarts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("youting","/cart")).then((function(t){t.data.success?(e.isLoading=!1,e.carts=t.data.data):(e.isLoading=!1,q["a"].emit("push-message",t.data))})).catch((function(e){console.log(e)}))},sendOrder:function(){var e=this;this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("youting","/order"),{data:this.form}).then((function(t){t.data.success?(console.log(t.data),t.data.orderId&&(q["a"].emit("push-message",t.data),q["a"].emit("update-cart"),e.$router.push("/pay/".concat(t.data.orderId)))):q["a"].emit("push-message",t.data)})).catch((function(e){console.log(e)}))}},created:function(){this.getCarts()}};a("f5fd");D.render=T;t["default"]=D},f5fd:function(e,t,a){"use strict";a("4746")}}]);
//# sourceMappingURL=chunk-a1437460.ed99823e.js.map