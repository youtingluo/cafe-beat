(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5202e63e"],{2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var c=a("6b75");function r(e){if(Array.isArray(e))return Object(c["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var n=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return r(e)||o(e)||Object(n["a"])(e)||s()}},aa15:function(e,t,a){e.exports=a.p+"img/sad_cup.8b1a621e.svg"},ad33:function(e,t,a){},cf2a:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),r=a("aa15"),o=a.n(r),n=Object(c["createVNode"])("div",{class:"banner d-flex align-items-center justify-content-center"},[Object(c["createVNode"])("h2",{class:"\n        text-white\n        fw-bold\n        bg-primary\n        border-bottom border-3\n        d-inline-block\n        py-3\n        px-5\n      "}," 填寫資料 ")],-1),s={key:0,class:"py-5 text-center"},l=Object(c["createVNode"])("h3",null,"您的購物車是空的",-1),i=Object(c["createVNode"])("div",null,[Object(c["createVNode"])("img",{class:"mb-3",src:o.a,title:"購物車是空的",alt:"sad_cup"})],-1),d=Object(c["createVNode"])("span",{class:"align-middle material-icons-outlined"}," shopping_cart ",-1),b=Object(c["createTextVNode"])("去購物"),u={key:1,class:"py-5"},m={class:"container"},p={class:"row"},f={class:"col-lg-8"},j={class:"mb-3"},O=Object(c["createVNode"])("label",{for:"name",class:"form-label"},[Object(c["createTextVNode"])("姓名 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),V={class:"mb-3"},N=Object(c["createVNode"])("label",{for:"email",class:"form-label"},[Object(c["createTextVNode"])("信箱 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),v={class:"mb-3"},g=Object(c["createVNode"])("label",{for:"tel",class:"form-label"},[Object(c["createTextVNode"])("電話 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),h={class:"mb-3"},y=Object(c["createVNode"])("label",{for:"address",class:"form-label"},[Object(c["createTextVNode"])("地址 "),Object(c["createVNode"])("span",{class:"text-danger"},"*")],-1),x={class:"mb-3"},k=Object(c["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),w={class:"d-flex justify-content-between my-3"},C={key:0,class:"spinner-border spinner-border-sm me-3"},B=Object(c["createTextVNode"])(" 送出訂單 "),L={class:"col-lg-4"},S=Object(c["createVNode"])("div",{class:"text-center p-3 text-white bg-secondary"},[Object(c["createVNode"])("h4",{class:"fw-bold"},"訂單列表")],-1),T={class:"col"},_={class:"ps-3"},q={class:"col"},D={class:"text-end"},$={class:"col"},F={class:"text-end pe-3"},U={class:"text-end p-3 bg-secondary text-dark"},A={class:"fw-bold"};function I(e,t,a,r,o,I){var J=Object(c["resolveComponent"])("Loading"),z=Object(c["resolveComponent"])("router-link"),E=Object(c["resolveComponent"])("Field"),M=Object(c["resolveComponent"])("error-message"),G=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,[Object(c["createVNode"])(J,{active:o.isLoading,"z-index":1060,loader:"bars",color:"#84543B"},null,8,["active"]),n,o.carts.final_total?(Object(c["openBlock"])(),Object(c["createBlock"])("section",u,[Object(c["createVNode"])("div",m,[Object(c["createVNode"])("div",p,[Object(c["createVNode"])("div",f,[Object(c["createVNode"])(G,{ref:"orderForm",onSubmit:I.sendOrder},{default:Object(c["withCtx"])((function(a){var r=a.errors;return[Object(c["createVNode"])("div",j,[O,Object(c["createVNode"])(E,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":r["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:o.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.form.user.name=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(M,{name:"姓名",class:"invalid-feedback"})]),Object(c["createVNode"])("div",V,[N,Object(c["createVNode"])(E,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":r["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:o.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.form.user.email=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(M,{name:"信箱",class:"invalid-feedback"})]),Object(c["createVNode"])("div",v,[g,Object(c["createVNode"])(E,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":r["電話"]}],placeholder:"請輸入電話",rules:"required|numeric|min:8|max:10",modelValue:o.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(M,{name:"電話",class:"invalid-feedback"})]),Object(c["createVNode"])("div",h,[y,Object(c["createVNode"])(E,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":r["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:o.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return o.form.user.address=e})},null,8,["class","modelValue"]),Object(c["createVNode"])(M,{name:"地址",class:"invalid-feedback"})]),Object(c["createVNode"])("div",x,[k,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{id:"message",name:"地址",type:"text",class:"form-control",placeholder:"留言給我們",rows:"3","onUpdate:modelValue":t[5]||(t[5]=function(e){return o.form.message=e})},null,512),[[c["vModelText"],o.form.message]])]),Object(c["createVNode"])("div",w,[Object(c["createVNode"])("div",{class:"btn btn-outline-primary",onClick:t[6]||(t[6]=function(t){return e.$router.go(-1)})}," ↼ 上一步 "),Object(c["createVNode"])("button",{class:["btn btn-primary",{"not-allowed":!I.isComplete}],type:"submit",disabled:!I.isComplete},[o.icon.isLoading?(Object(c["openBlock"])(),Object(c["createBlock"])("span",C)):Object(c["createCommentVNode"])("",!0),B],10,["disabled"])])]})),_:1},8,["onSubmit"])]),Object(c["createVNode"])("div",L,[S,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(o.carts.carts,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:"\n              row\n              g-0\n              justify-content-between\n              py-3\n              bg-primary\n              text-white text-nowrap\n            ",key:e.id},[Object(c["createVNode"])("div",T,[Object(c["createVNode"])("div",_,Object(c["toDisplayString"])(e.product.title),1)]),Object(c["createVNode"])("div",q,[Object(c["createVNode"])("div",D," x "+Object(c["toDisplayString"])(e.qty)+" "+Object(c["toDisplayString"])(e.product.unit),1)]),Object(c["createVNode"])("div",$,[Object(c["createVNode"])("div",F,"NT$ "+Object(c["toDisplayString"])(e.total),1)])])})),128)),Object(c["createVNode"])("div",U,[Object(c["createVNode"])("h4",A,"總價：NT$ "+Object(c["toDisplayString"])(o.carts.final_total),1)])])])])])):(Object(c["openBlock"])(),Object(c["createBlock"])("section",s,[l,i,Object(c["createVNode"])(z,{to:"/products",class:"btn btn-outline-primary"},{default:Object(c["withCtx"])((function(){return[d,b]})),_:1})]))],64)}var J=a("2909"),z=(a("4de4"),a("99af"),{inject:["emitter"],data:function(){return{isLoading:!1,icon:{isLoading:!1},carts:{carts:[],final_total:0},form:{user:{name:"",email:"",tel:"",address:""},message:""},validate:null}},computed:{isComplete:function(){var e=Object(J["a"])(document.querySelectorAll("form input")),t=e.filter((function(e){return e.classList.contains("is-invalid")}));return this.form.user.name&&this.form.user.email&&this.form.user.tel&&this.form.user.address&&0===t.length}},methods:{getCarts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("youting","/cart")).then((function(t){t.data.success?(e.carts=t.data.data,e.isLoading=!1):(e.isLoading=!1,e.emitter.emit("push-message",t.data))})).catch((function(e){console.log(e)}))},sendOrder:function(){var e=this;this.icon.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("youting","/order"),{data:this.form}).then((function(t){t.data.success?t.data.orderId&&(e.icon.isLoading=!1,e.emitter.emit("push-message",t.data),e.emitter.emit("update-cart"),e.$router.push("/pay/".concat(t.data.orderId))):e.emitter.emit("push-message",t.data)})).catch((function(e){console.log(e)}))}},created:function(){var e=this;this.getCarts(),this.emitter.on("update-cart",(function(){e.getCarts()}))}});a("f49c");z.render=I;t["default"]=z},f49c:function(e,t,a){"use strict";a("ad33")}}]);
//# sourceMappingURL=chunk-5202e63e.faf4f5a6.js.map