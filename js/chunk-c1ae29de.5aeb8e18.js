(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c1ae29de"],{2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return l}));var r=a("6b75");function c(e){if(Array.isArray(e))return Object(r["a"])(e)}a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function o(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var n=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e){return c(e)||o(e)||Object(n["a"])(e)||s()}},"717b":function(e,t,a){"use strict";a("8259")},8259:function(e,t,a){},cf2a:function(e,t,a){"use strict";a.r(t);a("b0c0");var r=a("7a23"),c=Object(r["createVNode"])("div",{class:"banner d-flex align-items-center justify-content-center"},[Object(r["createVNode"])("h2",{class:"\n        text-white\n        fw-bold\n        bg-primary\n        border-bottom border-3\n        d-inline-block\n        py-3\n        px-5\n      "}," 填寫資料 ")],-1),o={class:"py-5"},n={class:"container"},s={class:"position-relative m-4"},l={class:"progress",style:{height:"1px"}},d=Object(r["createVNode"])("div",{class:"\n            position-absolute\n            top-0\n            start-100\n            translate-middle\n            bg-light\n            text-dark\n            text-center\n            rounded-pill\n            px-3\n            py-2\n          "}," 3 ",-1),i={class:"row pt-5"},b={class:"col-lg-8"},u={class:"mb-3"},m=Object(r["createVNode"])("label",{for:"name",class:"form-label"},[Object(r["createTextVNode"])("姓名 "),Object(r["createVNode"])("span",{class:"text-danger"},"*")],-1),p={class:"mb-3"},j=Object(r["createVNode"])("label",{for:"email",class:"form-label"},[Object(r["createTextVNode"])("信箱 "),Object(r["createVNode"])("span",{class:"text-danger"},"*")],-1),f={class:"mb-3"},O=Object(r["createVNode"])("label",{for:"tel",class:"form-label"},[Object(r["createTextVNode"])("電話 "),Object(r["createVNode"])("span",{class:"text-danger"},"*")],-1),V={class:"mb-3"},v=Object(r["createVNode"])("label",{for:"address",class:"form-label"},[Object(r["createTextVNode"])("地址 "),Object(r["createVNode"])("span",{class:"text-danger"},"*")],-1),N={class:"mb-3"},g=Object(r["createVNode"])("label",{for:"message",class:"form-label"},"留言",-1),h={class:"d-flex justify-content-between my-3"},y={key:0,class:"spinner-border spinner-border-sm me-3"},x=Object(r["createTextVNode"])(" 送出訂單 "),w={class:"col-lg-4"},k=Object(r["createVNode"])("div",{class:"text-center p-3 text-dark bg-light"},[Object(r["createVNode"])("h4",{class:"fw-bold"},"訂單列表")],-1),C={class:"col"},L={class:"ps-3"},S={class:"col"},B={class:"text-end"},T={class:"col"},q={class:"text-end pe-3"},D={class:"text-end p-3"},$={class:"fw-bold"};function F(e,t,a,F,U,A){var I=Object(r["resolveComponent"])("Loading"),E=Object(r["resolveComponent"])("Field"),J=Object(r["resolveComponent"])("ErrorMessage"),M=Object(r["resolveComponent"])("Form");return Object(r["openBlock"])(),Object(r["createBlock"])(r["Fragment"],null,[Object(r["createVNode"])(I,{active:U.isLoading,"z-index":1060,loader:"bars",color:"#84543B"},null,8,["active"]),c,Object(r["createVNode"])("section",o,[Object(r["createVNode"])("div",n,[Object(r["createVNode"])("div",s,[Object(r["createVNode"])("div",l,[Object(r["createVNode"])("div",{style:"width: ".concat(U.width,"%"),class:"progress-bar",role:"progressbar","aria-valuenow":"50","aria-valuemin":"0","aria-valuemax":"100"},null,4)]),Object(r["createVNode"])("div",{class:["\n            position-absolute\n            top-0\n            start-0\n            translate-middle\n            text-center\n            rounded-pill\n            px-3\n            py-2\n          ",U.stepClass]}," 1 ",2),Object(r["createVNode"])("div",{class:["\n            position-absolute\n            top-0\n            start-50\n            translate-middle\n            text-center\n            rounded-pill\n            px-3\n            py-2\n          ",U.stepClass]}," 2 ",2),d]),Object(r["createVNode"])("div",i,[Object(r["createVNode"])("div",b,[Object(r["createVNode"])(M,{ref:"orderForm",onSubmit:A.sendOrder},{default:Object(r["withCtx"])((function(a){var c=a.errors;return[Object(r["createVNode"])("div",u,[m,Object(r["createVNode"])(E,{id:"name",name:"姓名",type:"text",class:["form-control",{"is-invalid":c["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:U.form.user.name,"onUpdate:modelValue":t[1]||(t[1]=function(e){return U.form.user.name=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(J,{name:"姓名",class:"invalid-feedback"})]),Object(r["createVNode"])("div",p,[j,Object(r["createVNode"])(E,{id:"email",name:"信箱",type:"email",class:["form-control",{"is-invalid":c["信箱"]}],placeholder:"請輸入信箱",rules:"email|required",modelValue:U.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return U.form.user.email=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(J,{name:"信箱",class:"invalid-feedback"})]),Object(r["createVNode"])("div",f,[O,Object(r["createVNode"])(E,{id:"tel",name:"電話",type:"tel",class:["form-control",{"is-invalid":c["電話"]}],placeholder:"請輸入電話",rules:"required|numeric|min:8|max:10",modelValue:U.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return U.form.user.tel=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(J,{name:"電話",class:"invalid-feedback"})]),Object(r["createVNode"])("div",V,[v,Object(r["createVNode"])(E,{id:"address",name:"地址",type:"text",class:["form-control",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:U.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return U.form.user.address=e})},null,8,["class","modelValue"]),Object(r["createVNode"])(J,{name:"地址",class:"invalid-feedback"})]),Object(r["createVNode"])("div",N,[g,Object(r["withDirectives"])(Object(r["createVNode"])("textarea",{id:"message",name:"地址",type:"text",class:"form-control",placeholder:"留言給我們",rows:"3","onUpdate:modelValue":t[5]||(t[5]=function(e){return U.form.message=e})},null,512),[[r["vModelText"],U.form.message]])]),Object(r["createVNode"])("div",h,[Object(r["createVNode"])("div",{class:"btn btn-outline-primary",onClick:t[6]||(t[6]=function(t){return e.$router.go(-1)})}," ↼ 上一步 "),Object(r["createVNode"])("button",{class:["btn btn-primary",{"not-allowed":!A.isComplete,disabled:U.icon.isLoading}],type:"submit",disabled:!A.isComplete},[U.icon.isLoading?(Object(r["openBlock"])(),Object(r["createBlock"])("span",y)):Object(r["createCommentVNode"])("",!0),x],10,["disabled"])])]})),_:1},8,["onSubmit"])]),Object(r["createVNode"])("div",w,[k,(Object(r["openBlock"])(!0),Object(r["createBlock"])(r["Fragment"],null,Object(r["renderList"])(U.carts.carts,(function(e){return Object(r["openBlock"])(),Object(r["createBlock"])("div",{class:"\n              row\n              g-0\n              justify-content-between\n              py-3\n              text-nowrap\n              border-bottom\n            ",key:e.id},[Object(r["createVNode"])("div",C,[Object(r["createVNode"])("div",L,Object(r["toDisplayString"])(e.product.title),1)]),Object(r["createVNode"])("div",S,[Object(r["createVNode"])("div",B," x "+Object(r["toDisplayString"])(e.qty)+" "+Object(r["toDisplayString"])(e.product.unit),1)]),Object(r["createVNode"])("div",T,[Object(r["createVNode"])("div",q,"NT$ "+Object(r["toDisplayString"])(e.total),1)])])})),128)),Object(r["createVNode"])("div",D,[Object(r["createVNode"])("h4",$,"總價：NT$ "+Object(r["toDisplayString"])(U.carts.final_total),1)])])])])])],64)}var U=a("2909"),A=(a("4de4"),a("99af"),{inject:["emitter"],data:function(){return{width:50,stepClass:["bg-primary","text-white"],isLoading:!1,icon:{isLoading:!1},carts:{},form:{user:{name:"",email:"",tel:"",address:""},message:""}}},computed:{isComplete:function(){var e=Object(U["a"])(document.querySelectorAll("form input")),t=e.filter((function(e){return e.classList.contains("is-invalid")}));return this.form.user.name&&this.form.user.email&&this.form.user.tel&&this.form.user.address&&0===t.length}},methods:{getCarts:function(){var e=this;this.isLoading=!0,this.$http.get("".concat("https://vue3-course-api.hexschool.io","/api/").concat("youting","/cart")).then((function(t){t.data.success?(e.carts=t.data.data,e.isLoading=!1):(e.isLoading=!1,e.emitter.emit("push-message",t.data))}))},sendOrder:function(){var e=this;this.icon.isLoading=!0,this.$http.post("".concat("https://vue3-course-api.hexschool.io","/api/").concat("youting","/order"),{data:this.form}).then((function(t){t.data.success?t.data.orderId&&(e.emitter.emit("push-message",t.data),e.emitter.emit("update-cart"),e.$router.push("/pay/".concat(t.data.orderId)),e.icon.isLoading=!1):e.emitter.emit("push-message",t.data)}))}},created:function(){this.getCarts()}});a("717b");A.render=F;t["default"]=A}}]);
//# sourceMappingURL=chunk-c1ae29de.5aeb8e18.js.map